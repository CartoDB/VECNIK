<!DOCTYPE html>
<html>
<head>
<title>Vecnik - Leaflet 0.8</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="lib/leaflet08/leaflet.css">
<style type="text/css">
html, body {
  border: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
#map {
  height: 100%;
}
</style>
<script src="lib/leaflet08/leaflet-src.js"></script>

<script src="../src/polyfills.js"></script>
<script src="../src/core/core.js"></script>
<script src="../src/core/events.js"></script>
<script src="../src/core/model.js"></script>
<script src="../src/core/settings.js"></script>
<script src="../src/mercator.js"></script>
<script src="../src/geometry.js"></script>
<script src="../src/models.js"></script>
<script src="../src/renderer.js"></script>
<script src="../src/shader.js"></script>

<script src="../src/provider/cartodb.sql.js"></script>
<script src="../src/provider/cartodb.js"></script>

<script src="../src/tile.js"></script>
<script src="../src/layer.js"></script>

<script src="lib/underscore.js"></script>
<script src="lib/carto.js"></script>
</head>

<body>
<div id="map"></div>

<script>
var map = new L.Map('map').setView([40.735291, -73.990731], 16);
new L.TileLayer('http://otile2.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png', { maxNativeZoom: 19, maxZoom: 21 }).addTo(map);

var provider = new VECNIK.CartoDB.API({
  user: 'pluto',
  table: 'mn_mappluto_13v1',
  columns: ['numfloors'],
  debug: false
});

var layers = VECNIK.CartoShader.create([
  '#layer {',
  ' polygon-fill: rgba(0, 0, 0, 0.1);',
  ' line-color: white;',
  ' line-width: 4;',
  ' [numfloors > 10] {',
  '    polygon-fill: rgba(255, 0, 0,0.88);',
  ' }',
  '}',
  '#layer::pass2 {',
  ' polygon-fill: rgba(0, 0, 0, 0.0);',
  ' line-width: 1;',
  ' line-color: black;',
  '}'
].join('\n'));

var renderer = new VECNIK.Renderer({ shader: layers });

var vlayer = new VECNIK.Layer('fake://url.for/now', {
  provider: provider,
  renderer: renderer
});

vlayer.addTo(map);
L.control.layers({}, { VECNIK: vlayer }).addTo(map);
</script>
</body>
</html>
